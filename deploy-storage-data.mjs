#!/usr/bin/env node
import { createClient } from '@supabase/supabase-js';

const SUPABASE_URL = 'https://mxboigeahudnbigxgefp.supabase.co';
const SERVICE_ROLE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im14Ym9pZ2VhaHVkbmJpZ3hnZWZwIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc3MTAxMDU5OSwiZXhwIjoyMDg2NTg2NTk5fQ.h9UfQD9Oq85m_LV0pLQvtqhrmOBhIuwlnsa02dIwKK0';

const supabase = createClient(SUPABASE_URL, SERVICE_ROLE_KEY);

console.log('üöÄ Deploying 20 Battery Storage Systems to Supabase...\n');

const storageData = [
  {
    slug: 'byd-battery-box-premium-hvs',
    brand: 'BYD',
    model: 'Battery-Box Premium',
    variant: 'HVS',
    production_location: 'China',
    production_country: 'China',
    module_capacity_kwh: 2.56,
    min_modules: 2,
    max_modules: 5,
    total_capacity_min_kwh: 5.12,
    total_capacity_max_kwh: 12.80,
    cell_technology: 'LFP',
    cycle_life: 6000,
    depth_of_discharge_pct: 90,
    efficiency_pct: 96.0,
    charge_power_kw: 3.5,
    discharge_power_kw: 3.5,
    continuous_power_kw: 3.5,
    peak_power_kw: 5.0,
    compatible_inverters: ['Fronius', 'SMA', 'Kostal', 'Goodwe'],
    inverter_type: 'DC-coupled',
    backup_capable: true,
    mounting_type: 'Wall',
    dimensions_h_mm: 713,
    dimensions_w_mm: 600,
    dimensions_d_mm: 220,
    weight_kg: 36,
    ip_rating: 'IP55',
    operating_temp_min_c: -10,
    operating_temp_max_c: 50,
    price_per_module_eur: 2490,
    installation_cost_eur: 1200,
    warranty_years: 10,
    warranty_cycles: 6000,
    warranty_capacity_retention_pct: 80,
    has_app: true,
    has_energy_management: true,
    supports_solar: true,
    supports_grid_services: false,
    status: 'Available',
    release_year: 2020,
    certifications: ['CE', 'VDE', 'IEC 62619'],
    description: 'High-quality LFP storage system with excellent scalability and proven reliability.',
    manufacturer_url: 'https://www.byd.com'
  },
  {
    slug: 'sonnen-batterie-10',
    brand: 'sonnen',
    model: 'sonnenBatterie 10',
    variant: 'performance',
    production_location: 'Germany',
    production_country: 'Germany',
    module_capacity_kwh: 2.5,
    min_modules: 4,
    max_modules: 11,
    total_capacity_min_kwh: 10.0,
    total_capacity_max_kwh: 27.5,
    cell_technology: 'LFP',
    cycle_life: 10000,
    depth_of_discharge_pct: 100,
    efficiency_pct: 93.0,
    charge_power_kw: 3.3,
    discharge_power_kw: 4.6,
    continuous_power_kw: 4.6,
    peak_power_kw: 8.6,
    compatible_inverters: ['SMA', 'Fronius', 'KACO', 'SolarEdge'],
    inverter_type: 'AC-coupled',
    backup_capable: true,
    mounting_type: 'Floor',
    dimensions_h_mm: 1470,
    dimensions_w_mm: 680,
    dimensions_d_mm: 230,
    weight_kg: 145,
    ip_rating: 'IP20',
    operating_temp_min_c: -5,
    operating_temp_max_c: 45,
    price_per_module_eur: 2800,
    installation_cost_eur: 1500,
    warranty_years: 10,
    warranty_cycles: 10000,
    warranty_capacity_retention_pct: 70,
    has_app: true,
    has_energy_management: true,
    supports_solar: true,
    supports_grid_services: true,
    status: 'Available',
    release_year: 2019,
    certifications: ['CE', 'VDE-AR-N 4105', 'KfW-Ready'],
    description: 'Premium German-made storage with integrated energy manager and grid services.',
    manufacturer_url: 'https://www.sonnen.de'
  },
  {
    slug: 'e3dc-s10-e-pro',
    brand: 'E3/DC',
    model: 'S10 E PRO',
    variant: null,
    production_location: 'Germany',
    production_country: 'Germany',
    module_capacity_kwh: 3.0,
    min_modules: 2,
    max_modules: 8,
    total_capacity_min_kwh: 6.0,
    total_capacity_max_kwh: 24.0,
    cell_technology: 'NMC',
    cycle_life: 7000,
    depth_of_discharge_pct: 95,
    efficiency_pct: 95.5,
    charge_power_kw: 9.2,
    discharge_power_kw: 9.2,
    continuous_power_kw: 9.2,
    peak_power_kw: 12.0,
    compatible_inverters: ['E3/DC (integrated)'],
    inverter_type: 'DC-coupled',
    backup_capable: true,
    mounting_type: 'Floor',
    dimensions_h_mm: 1200,
    dimensions_w_mm: 650,
    dimensions_d_mm: 330,
    weight_kg: 230,
    ip_rating: 'IP21',
    operating_temp_min_c: 0,
    operating_temp_max_c: 40,
    price_per_module_eur: 3200,
    installation_cost_eur: 2000,
    warranty_years: 10,
    warranty_cycles: 7000,
    warranty_capacity_retention_pct: 80,
    has_app: true,
    has_energy_management: true,
    supports_solar: true,
    supports_grid_services: true,
    status: 'Available',
    release_year: 2021,
    certifications: ['CE', 'VDE', 'KfW-Ready', 'THG-Quote-f√§hig'],
    description: 'Premium all-in-one system with integrated inverter and advanced energy management.',
    manufacturer_url: 'https://www.e3dc.com'
  },
  {
    slug: 'tesla-powerwall-2',
    brand: 'Tesla',
    model: 'Powerwall 2',
    variant: null,
    production_location: 'USA',
    production_country: 'USA',
    module_capacity_kwh: 13.5,
    min_modules: 1,
    max_modules: 10,
    total_capacity_min_kwh: 13.5,
    total_capacity_max_kwh: 135.0,
    cell_technology: 'NMC',
    cycle_life: 5000,
    depth_of_discharge_pct: 100,
    efficiency_pct: 90.0,
    charge_power_kw: 5.0,
    discharge_power_kw: 5.0,
    continuous_power_kw: 5.0,
    peak_power_kw: 7.0,
    compatible_inverters: ['Tesla (Gateway required)', 'SolarEdge', 'SMA'],
    inverter_type: 'AC-coupled',
    backup_capable: true,
    mounting_type: 'Wall',
    dimensions_h_mm: 1150,
    dimensions_w_mm: 755,
    dimensions_d_mm: 155,
    weight_kg: 114,
    ip_rating: 'IP67',
    operating_temp_min_c: -20,
    operating_temp_max_c: 50,
    price_per_module_eur: 9500,
    installation_cost_eur: 1800,
    warranty_years: 10,
    warranty_cycles: null,
    warranty_capacity_retention_pct: 70,
    has_app: true,
    has_energy_management: true,
    supports_solar: true,
    supports_grid_services: false,
    status: 'Available',
    release_year: 2016,
    certifications: ['CE', 'IEC 62619', 'UL 1973'],
    description: 'Popular integrated storage system with high capacity and outdoor-ready design.',
    manufacturer_url: 'https://www.tesla.com'
  },
  {
    slug: 'lg-resu-10h',
    brand: 'LG',
    model: 'RESU 10H',
    variant: 'Prime',
    production_location: 'South Korea',
    production_country: 'South Korea',
    module_capacity_kwh: 9.8,
    min_modules: 1,
    max_modules: 3,
    total_capacity_min_kwh: 9.8,
    total_capacity_max_kwh: 29.4,
    cell_technology: 'NMC',
    cycle_life: 6000,
    depth_of_discharge_pct: 95,
    efficiency_pct: 95.0,
    charge_power_kw: 5.0,
    discharge_power_kw: 5.0,
    continuous_power_kw: 5.0,
    peak_power_kw: 7.0,
    compatible_inverters: ['SMA', 'SolarEdge', 'Fronius', 'Kostal'],
    inverter_type: 'DC-coupled',
    backup_capable: false,
    mounting_type: 'Floor',
    dimensions_h_mm: 656,
    dimensions_w_mm: 452,
    dimensions_d_mm: 220,
    weight_kg: 97,
    ip_rating: 'IP55',
    operating_temp_min_c: -10,
    operating_temp_max_c: 45,
    price_per_module_eur: 6800,
    installation_cost_eur: 1000,
    warranty_years: 10,
    warranty_cycles: 6000,
    warranty_capacity_retention_pct: 60,
    has_app: false,
    has_energy_management: false,
    supports_solar: true,
    supports_grid_services: false,
    status: 'Available',
    release_year: 2017,
    certifications: ['CE', 'VDE', 'IEC 62619'],
    description: 'Compact high-voltage storage with excellent efficiency and broad inverter compatibility.',
    manufacturer_url: 'https://www.lgessbattery.com'
  },
  {
    slug: 'senec-home-v3-hybrid',
    brand: 'SENEC',
    model: 'Home V3 hybrid',
    variant: null,
    production_location: 'Germany',
    production_country: 'Germany',
    module_capacity_kwh: 2.5,
    min_modules: 3,
    max_modules: 16,
    total_capacity_min_kwh: 7.5,
    total_capacity_max_kwh: 40.0,
    cell_technology: 'LFP',
    cycle_life: 10000,
    depth_of_discharge_pct: 100,
    efficiency_pct: 94.0,
    charge_power_kw: 3.68,
    discharge_power_kw: 3.68,
    continuous_power_kw: 3.68,
    peak_power_kw: 5.0,
    compatible_inverters: ['SENEC (integrated)'],
    inverter_type: 'DC-coupled',
    backup_capable: true,
    mounting_type: 'Floor',
    dimensions_h_mm: 1200,
    dimensions_w_mm: 600,
    dimensions_d_mm: 305,
    weight_kg: 195,
    ip_rating: 'IP20',
    operating_temp_min_c: 0,
    operating_temp_max_c: 40,
    price_per_module_eur: 2600,
    installation_cost_eur: 1500,
    warranty_years: 10,
    warranty_cycles: 10000,
    warranty_capacity_retention_pct: 80,
    has_app: true,
    has_energy_management: true,
    supports_solar: true,
    supports_grid_services: true,
    status: 'Available',
    release_year: 2020,
    certifications: ['CE', 'VDE-AR-N 4105', 'KfW-Ready'],
    description: 'Modular all-in-one system with integrated inverter and cloud-based energy management.',
    manufacturer_url: 'https://www.senec.com'
  },
  {
    slug: 'varta-pulse-neo',
    brand: 'VARTA',
    model: 'pulse neo',
    variant: null,
    production_location: 'Europe',
    production_country: 'Hungary',
    module_capacity_kwh: 3.0,
    min_modules: 2,
    max_modules: 4,
    total_capacity_min_kwh: 6.0,
    total_capacity_max_kwh: 12.0,
    cell_technology: 'NMC',
    cycle_life: 5000,
    depth_of_discharge_pct: 95,
    efficiency_pct: 93.0,
    charge_power_kw: 3.3,
    discharge_power_kw: 3.3,
    continuous_power_kw: 3.3,
    peak_power_kw: 5.5,
    compatible_inverters: ['Fronius', 'Kostal', 'KACO'],
    inverter_type: 'DC-coupled',
    backup_capable: false,
    mounting_type: 'Floor',
    dimensions_h_mm: 1035,
    dimensions_w_mm: 615,
    dimensions_d_mm: 230,
    weight_kg: 125,
    ip_rating: 'IP21',
    operating_temp_min_c: 5,
    operating_temp_max_c: 35,
    price_per_module_eur: 2900,
    installation_cost_eur: 1200,
    warranty_years: 10,
    warranty_cycles: 5000,
    warranty_capacity_retention_pct: 80,
    has_app: true,
    has_energy_management: false,
    supports_solar: true,
    supports_grid_services: false,
    status: 'Available',
    release_year: 2021,
    certifications: ['CE', 'VDE', 'IEC 62619'],
    description: 'European-made storage with solid performance and competitive pricing.',
    manufacturer_url: 'https://www.varta-ag.com'
  },
  {
    slug: 'fenecon-home',
    brand: 'FENECON',
    model: 'Home',
    variant: '10',
    production_location: 'Germany',
    production_country: 'Germany',
    module_capacity_kwh: 5.0,
    min_modules: 2,
    max_modules: 4,
    total_capacity_min_kwh: 10.0,
    total_capacity_max_kwh: 20.0,
    cell_technology: 'LFP',
    cycle_life: 8000,
    depth_of_discharge_pct: 100,
    efficiency_pct: 95.0,
    charge_power_kw: 10.0,
    discharge_power_kw: 10.0,
    continuous_power_kw: 10.0,
    peak_power_kw: 15.0,
    compatible_inverters: ['FENECON (integrated)'],
    inverter_type: 'DC-coupled',
    backup_capable: true,
    mounting_type: 'Floor',
    dimensions_h_mm: 1100,
    dimensions_w_mm: 600,
    dimensions_d_mm: 300,
    weight_kg: 180,
    ip_rating: 'IP20',
    operating_temp_min_c: 0,
    operating_temp_max_c: 45,
    price_per_module_eur: 3500,
    installation_cost_eur: 1800,
    warranty_years: 10,
    warranty_cycles: 8000,
    warranty_capacity_retention_pct: 80,
    has_app: true,
    has_energy_management: true,
    supports_solar: true,
    supports_grid_services: true,
    status: 'Available',
    release_year: 2021,
    certifications: ['CE', 'VDE-AR-N 4105', 'KfW-Ready'],
    description: 'Open-source energy management system with high power and grid service capabilities.',
    manufacturer_url: 'https://www.fenecon.de'
  },
  {
    slug: 'huawei-luna2000',
    brand: 'Huawei',
    model: 'LUNA2000',
    variant: '5-S0',
    production_location: 'China',
    production_country: 'China',
    module_capacity_kwh: 5.0,
    min_modules: 1,
    max_modules: 6,
    total_capacity_min_kwh: 5.0,
    total_capacity_max_kwh: 30.0,
    cell_technology: 'LFP',
    cycle_life: 10000,
    depth_of_discharge_pct: 100,
    efficiency_pct: 95.0,
    charge_power_kw: 2.5,
    discharge_power_kw: 2.5,
    continuous_power_kw: 2.5,
    peak_power_kw: 5.0,
    compatible_inverters: ['Huawei SUN2000'],
    inverter_type: 'DC-coupled',
    backup_capable: true,
    mounting_type: 'Floor',
    dimensions_h_mm: 670,
    dimensions_w_mm: 600,
    dimensions_d_mm: 150,
    weight_kg: 64,
    ip_rating: 'IP66',
    operating_temp_min_c: -20,
    operating_temp_max_c: 55,
    price_per_module_eur: 3300,
    installation_cost_eur: 1000,
    warranty_years: 10,
    warranty_cycles: 10000,
    warranty_capacity_retention_pct: 70,
    has_app: true,
    has_energy_management: true,
    supports_solar: true,
    supports_grid_services: false,
    status: 'Available',
    release_year: 2020,
    certifications: ['CE', 'VDE', 'IEC 62619'],
    description: 'Compact modular system with excellent temperature range and IP66 rating.',
    manufacturer_url: 'https://www.huawei.com'
  },
  {
    slug: 'solarwatt-battery-flex-ac',
    brand: 'SOLARWATT',
    model: 'Battery flex AC',
    variant: null,
    production_location: 'Germany',
    production_country: 'Germany',
    module_capacity_kwh: 2.4,
    min_modules: 2,
    max_modules: 10,
    total_capacity_min_kwh: 4.8,
    total_capacity_max_kwh: 24.0,
    cell_technology: 'NMC',
    cycle_life: 6000,
    depth_of_discharge_pct: 90,
    efficiency_pct: 91.0,
    charge_power_kw: 3.0,
    discharge_power_kw: 3.0,
    continuous_power_kw: 3.0,
    peak_power_kw: 5.0,
    compatible_inverters: ['Any AC-coupled'],
    inverter_type: 'AC-coupled',
    backup_capable: true,
    mounting_type: 'Wall',
    dimensions_h_mm: 705,
    dimensions_w_mm: 513,
    dimensions_d_mm: 192,
    weight_kg: 35,
    ip_rating: 'IP55',
    operating_temp_min_c: -10,
    operating_temp_max_c: 50,
    price_per_module_eur: 2200,
    installation_cost_eur: 1500,
    warranty_years: 10,
    warranty_cycles: 6000,
    warranty_capacity_retention_pct: 80,
    has_app: true,
    has_energy_management: true,
    supports_solar: true,
    supports_grid_services: false,
    status: 'Available',
    release_year: 2019,
    certifications: ['CE', 'VDE', 'IEC 62619'],
    description: 'Flexible AC-coupled system compatible with any solar inverter, Made in Germany.',
    manufacturer_url: 'https://www.solarwatt.de'
  },
  {
    slug: 'pylontech-us5000',
    brand: 'Pylontech',
    model: 'US5000',
    variant: null,
    production_location: 'China',
    production_country: 'China',
    module_capacity_kwh: 4.8,
    min_modules: 2,
    max_modules: 8,
    total_capacity_min_kwh: 9.6,
    total_capacity_max_kwh: 38.4,
    cell_technology: 'LFP',
    cycle_life: 6000,
    depth_of_discharge_pct: 95,
    efficiency_pct: 95.0,
    charge_power_kw: 2.4,
    discharge_power_kw: 2.4,
    continuous_power_kw: 2.4,
    peak_power_kw: 3.0,
    compatible_inverters: ['Victron', 'GoodWe', 'Deye', 'Growatt'],
    inverter_type: 'DC-coupled',
    backup_capable: true,
    mounting_type: 'Floor',
    dimensions_h_mm: 442,
    dimensions_w_mm: 420,
    dimensions_d_mm: 130,
    weight_kg: 47,
    ip_rating: 'IP20',
    operating_temp_min_c: 0,
    operating_temp_max_c: 50,
    price_per_module_eur: 2100,
    installation_cost_eur: 800,
    warranty_years: 10,
    warranty_cycles: 6000,
    warranty_capacity_retention_pct: 80,
    has_app: false,
    has_energy_management: false,
    supports_solar: true,
    supports_grid_services: false,
    status: 'Available',
    release_year: 2018,
    certifications: ['CE', 'IEC 62619'],
    description: 'Cost-effective LFP storage with broad inverter compatibility and proven track record.',
    manufacturer_url: 'https://www.pylontech.com.cn'
  },
  {
    slug: 'kostal-piko-iq-55',
    brand: 'KOSTAL',
    model: 'PIKO IQ 5.5',
    variant: null,
    production_location: 'Germany',
    production_country: 'Germany',
    module_capacity_kwh: 11.52,
    min_modules: 1,
    max_modules: 3,
    total_capacity_min_kwh: 11.52,
    total_capacity_max_kwh: 34.56,
    cell_technology: 'NMC',
    cycle_life: 6000,
    depth_of_discharge_pct: 100,
    efficiency_pct: 96.7,
    charge_power_kw: 5.5,
    discharge_power_kw: 5.5,
    continuous_power_kw: 5.5,
    peak_power_kw: 8.0,
    compatible_inverters: ['KOSTAL (integrated)'],
    inverter_type: 'DC-coupled',
    backup_capable: true,
    mounting_type: 'Wall',
    dimensions_h_mm: 990,
    dimensions_w_mm: 650,
    dimensions_d_mm: 250,
    weight_kg: 170,
    ip_rating: 'IP54',
    operating_temp_min_c: -10,
    operating_temp_max_c: 50,
    price_per_module_eur: 9800,
    installation_cost_eur: 1500,
    warranty_years: 10,
    warranty_cycles: 6000,
    warranty_capacity_retention_pct: 80,
    has_app: true,
    has_energy_management: true,
    supports_solar: true,
    supports_grid_services: true,
    status: 'Available',
    release_year: 2021,
    certifications: ['CE', 'VDE-AR-N 4105', 'KfW-Ready'],
    description: 'High-efficiency all-in-one system with integrated solar inverter and energy manager.',
    manufacturer_url: 'https://www.kostal-solar-electric.com'
  },
  {
    slug: 'sma-sunny-boy-storage-5',
    brand: 'SMA',
    model: 'Sunny Boy Storage 5.0',
    variant: null,
    production_location: 'Germany',
    production_country: 'Germany',
    module_capacity_kwh: 2.56,
    min_modules: 2,
    max_modules: 6,
    total_capacity_min_kwh: 5.12,
    total_capacity_max_kwh: 15.36,
    cell_technology: 'LFP',
    cycle_life: 6000,
    depth_of_discharge_pct: 90,
    efficiency_pct: 96.0,
    charge_power_kw: 5.0,
    discharge_power_kw: 5.0,
    continuous_power_kw: 5.0,
    peak_power_kw: 7.0,
    compatible_inverters: ['SMA Sunny Boy Storage'],
    inverter_type: 'DC-coupled',
    backup_capable: false,
    mounting_type: 'Wall',
    dimensions_h_mm: 713,
    dimensions_w_mm: 600,
    dimensions_d_mm: 220,
    weight_kg: 36,
    ip_rating: 'IP55',
    operating_temp_min_c: -10,
    operating_temp_max_c: 50,
    price_per_module_eur: 2600,
    installation_cost_eur: 1800,
    warranty_years: 10,
    warranty_cycles: 6000,
    warranty_capacity_retention_pct: 80,
    has_app: true,
    has_energy_management: true,
    supports_solar: true,
    supports_grid_services: false,
    status: 'Available',
    release_year: 2019,
    certifications: ['CE', 'VDE-AR-N 4105', 'KfW-Ready'],
    description: 'German engineering with high efficiency and smart energy management via Sunny Portal.',
    manufacturer_url: 'https://www.sma.de'
  },
  {
    slug: 'fronius-solar-battery',
    brand: 'Fronius',
    model: 'Solar Battery',
    variant: '12.0',
    production_location: 'Austria',
    production_country: 'Austria',
    module_capacity_kwh: 4.0,
    min_modules: 3,
    max_modules: 6,
    total_capacity_min_kwh: 12.0,
    total_capacity_max_kwh: 24.0,
    cell_technology: 'LFP',
    cycle_life: 10000,
    depth_of_discharge_pct: 100,
    efficiency_pct: 95.0,
    charge_power_kw: 6.0,
    discharge_power_kw: 6.0,
    continuous_power_kw: 6.0,
    peak_power_kw: 9.0,
    compatible_inverters: ['Fronius Symo Hybrid', 'Fronius Primo GEN24'],
    inverter_type: 'DC-coupled',
    backup_capable: true,
    mounting_type: 'Floor',
    dimensions_h_mm: 1200,
    dimensions_w_mm: 650,
    dimensions_d_mm: 300,
    weight_kg: 185,
    ip_rating: 'IP55',
    operating_temp_min_c: -20,
    operating_temp_max_c: 50,
    price_per_module_eur: 3100,
    installation_cost_eur: 1600,
    warranty_years: 10,
    warranty_cycles: 10000,
    warranty_capacity_retention_pct: 80,
    has_app: true,
    has_energy_management: true,
    supports_solar: true,
    supports_grid_services: false,
    status: 'Available',
    release_year: 2020,
    certifications: ['CE', 'VDE-AR-N 4105', 'IEC 62619'],
    description: 'Austrian quality with LFP cells and excellent temperature tolerance.',
    manufacturer_url: 'https://www.fronius.com'
  },
  {
    slug: 'goodwe-lynx-home-f',
    brand: 'GoodWe',
    model: 'Lynx Home F',
    variant: 'G1',
    production_location: 'China',
    production_country: 'China',
    module_capacity_kwh: 2.76,
    min_modules: 3,
    max_modules: 6,
    total_capacity_min_kwh: 8.28,
    total_capacity_max_kwh: 16.56,
    cell_technology: 'LFP',
    cycle_life: 6000,
    depth_of_discharge_pct: 90,
    efficiency_pct: 95.0,
    charge_power_kw: 2.76,
    discharge_power_kw: 2.76,
    continuous_power_kw: 2.76,
    peak_power_kw: 4.0,
    compatible_inverters: ['GoodWe hybrid inverters'],
    inverter_type: 'DC-coupled',
    backup_capable: true,
    mounting_type: 'Floor',
    dimensions_h_mm: 960,
    dimensions_w_mm: 580,
    dimensions_d_mm: 180,
    weight_kg: 130,
    ip_rating: 'IP65',
    operating_temp_min_c: -20,
    operating_temp_max_c: 55,
    price_per_module_eur: 1900,
    installation_cost_eur: 900,
    warranty_years: 10,
    warranty_cycles: 6000,
    warranty_capacity_retention_pct: 80,
    has_app: true,
    has_energy_management: true,
    supports_solar: true,
    supports_grid_services: false,
    status: 'Available',
    release_year: 2021,
    certifications: ['CE', 'VDE', 'IEC 62619'],
    description: 'Value-oriented LFP storage with good temperature range and IP65 protection.',
    manufacturer_url: 'https://www.goodwe.com'
  },
  {
    slug: 'rct-power-storage-dc',
    brand: 'RCT Power',
    model: 'Power Storage DC',
    variant: '10.0',
    production_location: 'Germany',
    production_country: 'Germany',
    module_capacity_kwh: 5.12,
    min_modules: 2,
    max_modules: 6,
    total_capacity_min_kwh: 10.24,
    total_capacity_max_kwh: 30.72,
    cell_technology: 'LFP',
    cycle_life: 8000,
    depth_of_discharge_pct: 100,
    efficiency_pct: 96.5,
    charge_power_kw: 10.0,
    discharge_power_kw: 10.0,
    continuous_power_kw: 10.0,
    peak_power_kw: 12.0,
    compatible_inverters: ['RCT Power (integrated)'],
    inverter_type: 'DC-coupled',
    backup_capable: true,
    mounting_type: 'Floor',
    dimensions_h_mm: 1200,
    dimensions_w_mm: 650,
    dimensions_d_mm: 350,
    weight_kg: 210,
    ip_rating: 'IP20',
    operating_temp_min_c: 0,
    operating_temp_max_c: 45,
    price_per_module_eur: 3800,
    installation_cost_eur: 2000,
    warranty_years: 10,
    warranty_cycles: 8000,
    warranty_capacity_retention_pct: 80,
    has_app: true,
    has_energy_management: true,
    supports_solar: true,
    supports_grid_services: true,
    status: 'Available',
    release_year: 2020,
    certifications: ['CE', 'VDE-AR-N 4105', 'KfW-Ready'],
    description: 'High-performance German system with integrated inverter and advanced grid features.',
    manufacturer_url: 'https://www.rct-power.com'
  },
  {
    slug: 'viessmann-vitocharge-vx3',
    brand: 'Viessmann',
    model: 'Vitocharge VX3',
    variant: null,
    production_location: 'Europe',
    production_country: 'Germany',
    module_capacity_kwh: 6.4,
    min_modules: 1,
    max_modules: 3,
    total_capacity_min_kwh: 6.4,
    total_capacity_max_kwh: 19.2,
    cell_technology: 'LFP',
    cycle_life: 10000,
    depth_of_discharge_pct: 100,
    efficiency_pct: 94.0,
    charge_power_kw: 11.0,
    discharge_power_kw: 11.0,
    continuous_power_kw: 11.0,
    peak_power_kw: 15.0,
    compatible_inverters: ['Viessmann (integrated)', 'Fronius', 'SMA'],
    inverter_type: 'AC-coupled',
    backup_capable: true,
    mounting_type: 'Floor',
    dimensions_h_mm: 1300,
    dimensions_w_mm: 600,
    dimensions_d_mm: 300,
    weight_kg: 160,
    ip_rating: 'IP20',
    operating_temp_min_c: 0,
    operating_temp_max_c: 40,
    price_per_module_eur: 5200,
    installation_cost_eur: 1700,
    warranty_years: 10,
    warranty_cycles: 10000,
    warranty_capacity_retention_pct: 80,
    has_app: true,
    has_energy_management: true,
    supports_solar: true,
    supports_grid_services: true,
    status: 'Available',
    release_year: 2022,
    certifications: ['CE', 'VDE-AR-N 4105', 'KfW-Ready'],
    description: 'Premium heating manufacturer entering storage with high-power AC-coupled system.',
    manufacturer_url: 'https://www.viessmann.de'
  },
  {
    slug: 'solaredge-energy-bank',
    brand: 'SolarEdge',
    model: 'Energy Bank',
    variant: '10',
    production_location: 'South Korea',
    production_country: 'South Korea',
    module_capacity_kwh: 10.0,
    min_modules: 1,
    max_modules: 3,
    total_capacity_min_kwh: 10.0,
    total_capacity_max_kwh: 30.0,
    cell_technology: 'NMC',
    cycle_life: 6000,
    depth_of_discharge_pct: 100,
    efficiency_pct: 94.5,
    charge_power_kw: 5.0,
    discharge_power_kw: 5.0,
    continuous_power_kw: 5.0,
    peak_power_kw: 7.5,
    compatible_inverters: ['SolarEdge StorEdge', 'SolarEdge Home Hub'],
    inverter_type: 'DC-coupled',
    backup_capable: true,
    mounting_type: 'Floor',
    dimensions_h_mm: 1156,
    dimensions_w_mm: 656,
    dimensions_d_mm: 214,
    weight_kg: 135,
    ip_rating: 'IP55',
    operating_temp_min_c: -10,
    operating_temp_max_c: 50,
    price_per_module_eur: 7200,
    installation_cost_eur: 1400,
    warranty_years: 10,
    warranty_cycles: 6000,
    warranty_capacity_retention_pct: 70,
    has_app: true,
    has_energy_management: true,
    supports_solar: true,
    supports_grid_services: false,
    status: 'Available',
    release_year: 2021,
    certifications: ['CE', 'VDE', 'IEC 62619'],
    description: 'Integrated storage solution optimized for SolarEdge ecosystem with module-level monitoring.',
    manufacturer_url: 'https://www.solaredge.com'
  },
  {
    slug: 'alphaess-smile-g3',
    brand: 'AlphaESS',
    model: 'SMILE-G3',
    variant: null,
    production_location: 'China',
    production_country: 'China',
    module_capacity_kwh: 2.9,
    min_modules: 3,
    max_modules: 8,
    total_capacity_min_kwh: 8.7,
    total_capacity_max_kwh: 23.2,
    cell_technology: 'LFP',
    cycle_life: 6000,
    depth_of_discharge_pct: 100,
    efficiency_pct: 95.5,
    charge_power_kw: 3.0,
    discharge_power_kw: 3.0,
    continuous_power_kw: 3.0,
    peak_power_kw: 4.6,
    compatible_inverters: ['AlphaESS (integrated)'],
    inverter_type: 'AC-coupled',
    backup_capable: true,
    mounting_type: 'Floor',
    dimensions_h_mm: 1000,
    dimensions_w_mm: 550,
    dimensions_d_mm: 200,
    weight_kg: 140,
    ip_rating: 'IP65',
    operating_temp_min_c: -20,
    operating_temp_max_c: 55,
    price_per_module_eur: 2100,
    installation_cost_eur: 1200,
    warranty_years: 10,
    warranty_cycles: 6000,
    warranty_capacity_retention_pct: 80,
    has_app: true,
    has_energy_management: true,
    supports_solar: true,
    supports_grid_services: false,
    status: 'Available',
    release_year: 2020,
    certifications: ['CE', 'VDE', 'IEC 62619'],
    description: 'Affordable AC-coupled storage with excellent temperature range and IP65 outdoor rating.',
    manufacturer_url: 'https://www.alphaess.com'
  },
  {
    slug: 'sonnen-eco-9',
    brand: 'sonnen',
    model: 'sonnenBatterie eco 9',
    variant: null,
    production_location: 'Germany',
    production_country: 'Germany',
    module_capacity_kwh: 2.5,
    min_modules: 2,
    max_modules: 6,
    total_capacity_min_kwh: 5.0,
    total_capacity_max_kwh: 15.0,
    cell_technology: 'LFP',
    cycle_life: 10000,
    depth_of_discharge_pct: 100,
    efficiency_pct: 93.0,
    charge_power_kw: 2.5,
    discharge_power_kw: 3.3,
    continuous_power_kw: 3.3,
    peak_power_kw: 4.6,
    compatible_inverters: ['SMA', 'Fronius', 'KACO', 'SolarEdge'],
    inverter_type: 'AC-coupled',
    backup_capable: true,
    mounting_type: 'Floor',
    dimensions_h_mm: 1470,
    dimensions_w_mm: 680,
    dimensions_d_mm: 230,
    weight_kg: 120,
    ip_rating: 'IP20',
    operating_temp_min_c: -5,
    operating_temp_max_c: 45,
    price_per_module_eur: 2400,
    installation_cost_eur: 1500,
    warranty_years: 10,
    warranty_cycles: 10000,
    warranty_capacity_retention_pct: 70,
    has_app: true,
    has_energy_management: true,
    supports_solar: true,
    supports_grid_services: true,
    status: 'Available',
    release_year: 2018,
    certifications: ['CE', 'VDE-AR-N 4105', 'KfW-Ready'],
    description: 'Entry-level sonnen system with proven German quality and smart energy management.',
    manufacturer_url: 'https://www.sonnen.de'
  }
];

try {
  // First check if table exists and has data
  const { count: existingCount, error: countError } = await supabase
    .from('battery_storage')
    .select('*', { count: 'exact', head: true });

  if (countError) {
    if (countError.message.includes('does not exist')) {
      console.error('‚ùå Table does not exist!');
      console.log('\n‚ö†Ô∏è  Please run the CREATE TABLE SQL in Supabase dashboard:');
      console.log('   File: /supabase/migrations/003_battery_storage.sql');
      console.log('   Dashboard: https://supabase.com/dashboard/project/mxboigeahudnbigxgefp/sql\n');
      process.exit(1);
    }
    throw countError;
  }

  if (existingCount > 0) {
    console.log(`‚ö†Ô∏è  Table already has ${existingCount} systems.`);
    console.log('üîÑ Clearing existing data and inserting fresh data...\n');

    // Delete all existing rows
    const { error: deleteError } = await supabase
      .from('battery_storage')
      .delete()
      .neq('id', '00000000-0000-0000-0000-000000000000'); // Delete all

    if (deleteError) {
      console.error('‚ùå Error clearing table:', deleteError.message);
      process.exit(1);
    }

    console.log('‚úÖ Existing data cleared.\n');
  }

  // Insert all 20 systems
  console.log('üì¶ Inserting 20 storage systems...\n');

  const { data, error } = await supabase
    .from('battery_storage')
    .insert(storageData)
    .select();

  if (error) {
    console.error('‚ùå Insert error:', error.message);
    console.error('Details:', error);
    process.exit(1);
  }

  console.log(`‚úÖ Successfully inserted ${data.length} systems!\n`);

  // Verify final count
  const { count: finalCount } = await supabase
    .from('battery_storage')
    .select('*', { count: 'exact', head: true });

  console.log(`üìä Final database count: ${finalCount} systems\n`);
  console.log('üéâ Deployment complete!\n');
  console.log('üîó Test the frontend at: http://localhost:5173/storage\n');
  console.log('üìã Database breakdown:');

  // Show breakdown by production location
  const { data: breakdown } = await supabase
    .from('battery_storage')
    .select('production_country');

  const countryCount = breakdown.reduce((acc, item) => {
    acc[item.production_country] = (acc[item.production_country] || 0) + 1;
    return acc;
  }, {});

  Object.entries(countryCount).forEach(([country, count]) => {
    console.log(`   ${country}: ${count} systems`);
  });

  console.log('');

} catch (err) {
  console.error('\n‚ùå Deployment failed:', err.message);
  console.error('Stack:', err.stack);
  process.exit(1);
}
